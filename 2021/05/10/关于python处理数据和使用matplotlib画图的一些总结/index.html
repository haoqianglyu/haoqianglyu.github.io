<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.3.0"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>.pace .pace-progress{background:#1e92fb;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1e92fb,0 0 5px #1e92fb}.pace .pace-activity{border-top-color:#1e92fb;border-left-color:#1e92fb}</style><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/dog-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/dog-16x16-next.png"><link rel="mask-icon" href="/images/dog.svg" color="#222"><meta name="google-site-verification" content="w5P_t3oX3Suo0nbSOjahTQHXS-QDlBH-ynJts-a4N_0"><meta name="baidu-site-verification" content="code-N1BUmZoauP"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"haoqianglyu.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="最近公司跟同济合作弄了一个气象数据分析模型，后续需要我做一些对excel数据的处理、绘制一些特定的图表(例如饼状图，雷达图，箱型图，以及最复杂的是一个颜色块阵图)。下面是我对一些用到的工具的总结，譬如画图的库matplotlib，Excel与Python串联的工具pandas，以及Python中强大的数学库Numpy。"><meta property="og:type" content="article"><meta property="og:title" content="关于python处理数据和使用matplotlib画图的一些总结"><meta property="og:url" content="https://haoqianglyu.github.io/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/index.html"><meta property="og:site_name" content="Haoqiang Lyu"><meta property="og:description" content="最近公司跟同济合作弄了一个气象数据分析模型，后续需要我做一些对excel数据的处理、绘制一些特定的图表(例如饼状图，雷达图，箱型图，以及最复杂的是一个颜色块阵图)。下面是我对一些用到的工具的总结，譬如画图的库matplotlib，Excel与Python串联的工具pandas，以及Python中强大的数学库Numpy。"><meta property="og:locale"><meta property="og:image" content="https://haoqianglyu.github.io/images/dataframe.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/error.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/pie_error.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/pie_right.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/colorgrid.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/city.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/shanghai.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/pie_right.png"><meta property="og:image" content="https://haoqianglyu.github.io/images/radar.png"><meta property="article:published_time" content="2021-05-10T01:07:25.000Z"><meta property="article:modified_time" content="2021-05-10T04:18:35.693Z"><meta property="article:author" content="Haoqiang Lyu"><meta property="article:tag" content="Python"><meta property="article:tag" content="matplotlib"><meta property="article:tag" content="numpy"><meta property="article:tag" content="excel"><meta property="article:tag" content="pandas"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://haoqianglyu.github.io/images/dataframe.png"><link rel="canonical" href="https://haoqianglyu.github.io/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"default"}</script><title>关于python处理数据和使用matplotlib画图的一些总结 | Haoqiang Lyu</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script src="/js/src/photoswipe.min.js?v="></script><script src="/js/src/photoswipe-ui-default.min.js?v="></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"><a target="_blank" rel="noopener" href="https://github.com/haoqianglyu" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta custom-logo"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Haoqiang Lyu</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">Studio</p><a><img class="custom-logo-image" src="/images/IMG_0039.jpg" alt="Haoqiang Lyu"></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">14</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">9</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">5</span></a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li><li class="menu-item menu-item-momo"><a href="/album" rel="section"><i class="fa fa-paw fa-fw"></i>Momo</a></li><li class="menu-item menu-item-video"><a href="/video" rel="section"><i class="fa fa-film fa-fw"></i>Video</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="default"><link itemprop="mainEntityOfPage" href="https://haoqianglyu.github.io/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="Haoqiang Lyu"><meta itemprop="description" content="For you, a thousand times over."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Haoqiang Lyu"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">关于python处理数据和使用matplotlib画图的一些总结</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-05-10 09:07:25 / Modified: 12:18:35" itemprop="dateCreated datePublished" datetime="2021-05-10T09:07:25+08:00">2021-05-10</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Python/matplotlib/" itemprop="url" rel="index"><span itemprop="name">matplotlib</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine: </span><a title="valine" href="/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>最近公司跟同济合作弄了一个气象数据分析模型，后续需要我做一些对excel数据的处理、绘制一些特定的图表(例如饼状图，雷达图，箱型图，以及最复杂的是一个颜色块阵图)。下面是我对一些用到的工具的总结，譬如画图的库<a target="_blank" rel="noopener" href="https://www.osgeo.cn/matplotlib/gallery/index.html">matplotlib</a>，Excel与Python串联的工具pandas，以及Python中强大的数学库Numpy。</p><a id="more"></a><h3 id="使用Pandas从excel导入导出、处理数据"><a href="#使用Pandas从excel导入导出、处理数据" class="headerlink" title="使用Pandas从excel导入导出、处理数据"></a>使用Pandas从excel导入导出、处理数据</h3><p>Pandas是一个强大的分析结构化数据的工具集；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。他有两个比较实用的小工具：DataFrame和Series。他们的内容其实很多，我只总结我用到的，有兴趣的可以自己去翻文档。</p><h4 id="利器之一：DataFrame"><a href="#利器之一：DataFrame" class="headerlink" title="利器之一：DataFrame"></a>利器之一：DataFrame</h4><p>DataFrame是Pandas中的一个表格型的数据结构，包含有一组有序的列，每列可以是不同的值类型(数值、字符串、布尔型等)，DataFrame即有行索引也有列索引，可以被看做是由Series组成的字典。</p><h5 id="从excel导入数据"><a href="#从excel导入数据" class="headerlink" title="从excel导入数据"></a>从excel导入数据</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">filepath = <span class="string">&#x27;北京.xlsx&#x27;</span></span><br><span class="line">df = pd.read_excel(filepath, sheet_name=<span class="string">&quot;逐时气象参数&quot;</span>, skiprows=1)</span><br></pre></td></tr></table></figure><p>上述代码会将”北京.xlsx”这个文件里的内容全部读入DataFrame以便后续的处理，我使用skiprows=1是因为从气象网站上拉下来的源数据第一行是空行，所以我把它去除掉了。pd.read_excel()这个方法的参数可以有20多个，有兴趣的自行查看。值得注意的是这时候的dataframe与初始excel表几乎一样，有一个区别是dataframe会在第一列添加从0依次递增的索引,类似于下图：</p><center><img src="/images/dataframe.png"></center><h5 id="创建新的dataframe"><a href="#创建新的dataframe" class="headerlink" title="创建新的dataframe"></a>创建新的dataframe</h5><p>很多时候我们处理完excel数据时候会出现新的列，或者新的分析结果需要插入到excel中，这时候就需要在python中使用DataFrame来保存你处理完的数据,例如我用了字典来存储城市的数据，字典内容如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;上海&#x27;</span>: [1.61, 10.65, 6.5, 6.28, 5.09, 7.41], </span><br><span class="line"> <span class="string">&#x27;乐山&#x27;</span>: [0.0, 9.08, 4.95, 4.74, 3.44, 6.24], </span><br><span class="line"> <span class="string">&#x27;东方&#x27;</span>: [2.79, 9.77, 6.5, 6.35, 5.44, 7.22], </span><br><span class="line"> <span class="string">&#x27;盐城&#x27;</span>: [2.42, 10.89, 7.18, 6.92, 5.7, 7.9], </span><br><span class="line"> <span class="string">&#x27;丽江&#x27;</span>: [0, 0, 0.0, 0.0, 0.0, 0.0]&#125;</span><br></pre></td></tr></table></figure><p>想要把它存入excel，并新建一个名为”除湿供冷”的表单，只需要</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(box_dict)</span><br><span class="line">write = pd.ExcelWriter(<span class="string">&#x27;城市数据.xlsx&#x27;</span>)</span><br><span class="line">df.to_excel(write, sheet_name=<span class="string">&#x27;除湿供冷&#x27;</span>, index=False)</span><br><span class="line">write.save()</span><br></pre></td></tr></table></figure><p>注：如果你想放入excel的不是数据而是图片，使用以下方法：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import xlwings as xw</span><br><span class="line">import pandas as pd</span><br><span class="line">from PIL import Image</span><br><span class="line"></span><br><span class="line">wb = xw.Book(<span class="string">&#x27;citymap.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment"># 在wb中新建一张新的sheet.可以指定位置</span></span><br><span class="line">sheet = wb.sheets.add(name=cityname, before=None, after=None)</span><br><span class="line">im = Image.open(filepath)</span><br><span class="line">width, height = im.size[0], im.size[1]</span><br><span class="line">sheet.pictures.add(filepath, left=sheet.range(<span class="string">&#x27;D5&#x27;</span>).left, top=sheet.range(<span class="string">&#x27;D5&#x27;</span>).top,width=width,height=height)</span><br><span class="line">wb.save()</span><br><span class="line">wb.close()</span><br></pre></td></tr></table></figure><h4 id="利器之二：Series"><a href="#利器之二：Series" class="headerlink" title="利器之二：Series"></a>利器之二：Series</h4><p>它是一种类似于一维数组的对象，是由一组数据(各种NumPy数据类型)以及一组与之相关的数据标签(即索引)组成。仅由一组数据也可产生简单的Series对象。以前我使用过这个，但这次用的不多就不做过多介绍了，想了解的自行查阅文档。</p><h3 id="关于图表上显示不出中文的问题"><a href="#关于图表上显示不出中文的问题" class="headerlink" title="关于图表上显示不出中文的问题"></a>关于图表上显示不出中文的问题</h3><p>运行报错内容大致如下：</p><center><img src="/images/error.png"></center>绘制出来的图像是这样的：<center><img src="/images/pie_error.png" width="500" height="250"></center>这个问题的原因是你的matplotlib(以下简称plt)找不到字体，需要自行设置一下，网上大部分解决方法是:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>]=[<span class="string">&#x27;SimHei&#x27;</span>]</span><br></pre></td></tr></table></figure><p>但是我自己的macbook pro并不带SimHei这个字体，而且我也不想去下载字体之后添加进去,折腾好久发现python还是自带可以显示中文的字体的，输入如下代码可以查看系统可用字体</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from matplotlib.font_manager import FontManager</span><br><span class="line">fm = FontManager()</span><br><span class="line">mat_fonts = <span class="built_in">set</span>(f.name <span class="keyword">for</span> f <span class="keyword">in</span> fm.ttflist)</span><br><span class="line"><span class="built_in">print</span>(mat_fonts)</span><br></pre></td></tr></table></figure><p>上面的代码大家有兴趣可以自己去尝试着玩一下，下面才是重点,我是用的是下面这个字体就能正常显示中文了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;Arial Unicode MS&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = False  <span class="comment"># 用来正常显示负号</span></span><br></pre></td></tr></table></figure><p>正确显示的饼状图如下：</p><center><img src="/images/pie_right.png" width="500" height="250"></center><h3 id="绘制颜色块阵图"><a href="#绘制颜色块阵图" class="headerlink" title="绘制颜色块阵图"></a>绘制颜色块阵图</h3><p>其实很多plt可以画出来的图，excel里也可以画出来，只不过在对于源数据的处理上可能使用excel本身的话，没有像python这么方便，这里的这个块阵图excel也可以做得到，只是数据不好处理而且不太美观。首先说一下我大概要画什么，需求是这样的，举个简单例子：假设有一个5*3共15个格子的方格，每个方格里有1-9的数字，我们要根据数字的不同，给他填充上对应的颜色，比如1对应蓝色，2对应红色。如果你进入到<a target="_blank" rel="noopener" href="https://www.osgeo.cn/matplotlib/gallery/index.html">Matplotlib官网</a>，它里面有类似的，比如”彩色网格”：</p><center><img src="/images/colorgrid.png" width="300" height="200"></center>只不过类似这种的，官网上的方案只有依靠pcolormesh 或者 cmap(一般就是一个色阶)来完成，无法自定义数字对应颜色的要求，下面介绍我发现的两种方法，数据处理这里不赘述了，一些巧妙地方法后面介绍，默认这里的输入数据就是一个python矩阵(我的数据是365天*24小时=8760小时的矩阵)。<h4 id="方法1：使用Image直接生成"><a href="#方法1：使用Image直接生成" class="headerlink" title="方法1：使用Image直接生成"></a>方法1：使用Image直接生成</h4><p>首先将每个格子的数字，拆分成[r,g,b]三原色数组</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 填充地图数组的颜色通道</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(365):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(24):</span><br><span class="line">        value = int(map_data[i][j])</span><br><span class="line">        <span class="keyword">if</span> value == 0:  <span class="comment"># 如果地图值为0，显示黑色</span></span><br><span class="line">            map_data[i][j] = [0, 0, 0]</span><br><span class="line">        <span class="keyword">else</span>:  <span class="comment"># 将流量低的区域根据区域号码来填充RGB三通道</span></span><br><span class="line">            r = (value % 255) * 50 % 255  <span class="comment"># 取模乘以50再取模作为R通道</span></span><br><span class="line">            g = (value // 255) * 50 + 100  <span class="comment"># 取整加100作为G通道的值</span></span><br><span class="line">            b = value % 255  <span class="comment"># 取模作为B通道的值</span></span><br><span class="line">            <span class="keyword">if</span> value == 1:</span><br><span class="line">                map_data[i][j] = [117,21,21]  <span class="comment"># 棕色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 2:</span><br><span class="line">                map_data[i][j] = [255, 109, 109]  <span class="comment"># 红色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 3:</span><br><span class="line">                map_data[i][j] = [231, 103, 174]  <span class="comment"># 紫色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 4:</span><br><span class="line">                map_data[i][j] = [156, 156, 156]  <span class="comment"># 灰色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 5:</span><br><span class="line">                map_data[i][j] = [255, 192, 203]  <span class="comment"># 粉色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 6:</span><br><span class="line">                map_data[i][j] = [255, 251, 153]  <span class="comment"># 黄色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 7:</span><br><span class="line">                map_data[i][j] = [93,201,149]  <span class="comment"># 青色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 8:</span><br><span class="line">                map_data[i][j] = [8,33,170]  <span class="comment"># 蓝色</span></span><br><span class="line">            <span class="keyword">elif</span> value == 9:</span><br><span class="line">                map_data[i][j] = [60, 123, 36]  <span class="comment"># 绿色</span></span><br></pre></td></tr></table></figure><p>然后利用Image将转换过后的颜色矩阵，绘制出来：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出png图像</span></span><br><span class="line">map_data = np.array(map_data)</span><br><span class="line">map_data = np.asarray(map_data, np.uint8)</span><br><span class="line">pic = Image.fromarray(map_data)</span><br><span class="line"><span class="comment"># 将图片逆时针旋转90度</span></span><br><span class="line">pic = pic.transpose(Image.ROTATE_90)</span><br><span class="line">pic.save(<span class="string">&#x27;city.png&#x27;</span>)</span><br></pre></td></tr></table></figure><p>效果图如下：</p><center><img src="/images/city.png"></center><h4 id="方法2：使用matplotlib来完成"><a href="#方法2：使用matplotlib来完成" class="headerlink" title="方法2：使用matplotlib来完成"></a>方法2：使用matplotlib来完成</h4><p>首先，定义一个颜色对应的矩阵：[数值,r,g,b]</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ca = np.array([[1,117,21,21],</span><br><span class="line">               [2,255, 109, 109],</span><br><span class="line">               [3,231, 103, 174],</span><br><span class="line">               [4,156, 156, 156],</span><br><span class="line">               [5,255, 192, 203],</span><br><span class="line">               [6,255, 251, 153],</span><br><span class="line">               [7,93,201,149],</span><br><span class="line">               [8,8,33,170],</span><br><span class="line">               [9,60, 123, 36]])</span><br></pre></td></tr></table></figure><p>然后将输入的矩阵，每个色块的数值变为[r/255,g/255,b/255]，这样的格式才能给plt制图</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">u, ind = np.unique(a, return_inverse=True)</span><br><span class="line">ind = a - 1</span><br><span class="line">c = ca[ca[:,0].argsort()][:,1:]/255.</span><br><span class="line">b =  np.moveaxis(c[ind][:,:,np.newaxis],1,2).reshape((a.shape[0],a.shape[1],3))</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">plt.imshow(b)</span><br><span class="line">plt.savefig(<span class="string">&#x27;pic_name&#x27;</span>,dpi = 600)</span><br></pre></td></tr></table></figure><p>上述代码的第一行中的ind，在矩阵规模小的时候我测试了没问题，但是可能是我的数据过大还是什么原因，处理的不正确，所以我下面手动纠正了一步ind=a-1,经过上述代码我就将我需要的矩阵填充上了我想要的颜色。</p><center><img src="/images/shanghai.png" width="600" height="250"></center>上面两个图本质上是一模一样的，只是下面的图我用了一些小技巧让他更加好看：<h5 id="纵向拉伸："><a href="#纵向拉伸：" class="headerlink" title="纵向拉伸："></a>纵向拉伸：</h5><p>因为365*24这样的数据画出来的图，按照每一个网格都是正方形计算，纵向会特别窄，所以我把源数据矩阵每一行复制了四次，用以模拟纵向拉伸，这样做的还有一点好处(相较于图片直接拉伸)是图像不会失真。复制四次代码使用numpy也是轻松解决(感叹一句numpy真nb！)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = np.repeat(res,repeats = 4,axis=0)</span><br></pre></td></tr></table></figure><p>res就是原来的矩阵，a就是按行复制4次之后的numpy矩阵</p><h5 id="将365天的横坐标改成1-12月"><a href="#将365天的横坐标改成1-12月" class="headerlink" title="将365天的横坐标改成1-12月"></a>将365天的横坐标改成1-12月</h5><p>需要做的是把每个月月中的那一天算出来是365天中的第几天，依次对应即可,纵坐标以此类推，因为放大了4倍，所以对应着除以4就可以，这里不赘述了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">month_starts = [14,45,73,104,134,165,195,226,257,287,318,348]</span><br><span class="line">month_names = [<span class="string">&#x27;1月&#x27;</span>,<span class="string">&#x27;2月&#x27;</span>,<span class="string">&#x27;3月&#x27;</span>,<span class="string">&#x27;4月&#x27;</span>,<span class="string">&#x27;5月&#x27;</span>,<span class="string">&#x27;6月&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;7月&#x27;</span>,<span class="string">&#x27;8月&#x27;</span>,<span class="string">&#x27;9月&#x27;</span>,<span class="string">&#x27;10月&#x27;</span>,<span class="string">&#x27;11月&#x27;</span>,<span class="string">&#x27;12月&#x27;</span>]</span><br><span class="line"></span><br><span class="line">ax.set_xticks(month_starts)</span><br><span class="line">ax.set_xticklabels(month_names)</span><br></pre></td></tr></table></figure><h5 id="加上垂直于横坐标的参考线"><a href="#加上垂直于横坐标的参考线" class="headerlink" title="加上垂直于横坐标的参考线"></a>加上垂直于横坐标的参考线</h5><p>如果不加这个参考线，我们看整个图的时候在对应上会有些吃力。这里我偷了个懒，参考线直接按照365天除以12个月平分了，而不是每个月精细地去标：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">miloc = plt.MultipleLocator(365/12)</span><br><span class="line">ax.xaxis.set_minor_locator(miloc)</span><br><span class="line">plt.grid(<span class="built_in">which</span>=<span class="string">&#x27;minor&#x27;</span>,axis=<span class="string">&#x27;x&#x27;</span>,linestyle=<span class="string">&#x27;dashed&#x27;</span>, color=<span class="string">&#x27;grey&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="一些其他小技巧"><a href="#一些其他小技巧" class="headerlink" title="一些其他小技巧"></a>一些其他小技巧</h3><p>上述基本就是这次的总结内容了，还有一些使用中碰到的小问题，可以用一些小技巧去解决。</p><h4 id="饼状图加上图例以及控制图例的位置"><a href="#饼状图加上图例以及控制图例的位置" class="headerlink" title="饼状图加上图例以及控制图例的位置"></a>饼状图加上图例以及控制图例的位置</h4><p>使用ax.legend()即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ax.legend(wedges, new_labels,</span><br><span class="line">          title=<span class="string">&quot;模式&quot;</span>,</span><br><span class="line">          loc=<span class="string">&quot;center left&quot;</span>,</span><br><span class="line">          bbox_to_anchor=(1.3, 0, 0.5, 1))</span><br><span class="line"></span><br><span class="line">fig.subplots_adjust(right=0.7)</span><br></pre></td></tr></table></figure><h4 id="饼状图默认显示的是比例，如何显示数值，以及如何不显示数值为0的数据？"><a href="#饼状图默认显示的是比例，如何显示数值，以及如何不显示数值为0的数据？" class="headerlink" title="饼状图默认显示的是比例，如何显示数值，以及如何不显示数值为0的数据？"></a>饼状图默认显示的是比例，如何显示数值，以及如何不显示数值为0的数据？</h4><p>正常的饼状图按照我的数据如下图，应该有9个颜色，但是因为我这里两个模式的数据为0，所以将其去除了：</p><center><img src="/images/pie_right.png" width="500" height="250"></center>做法如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">labels = [<span class="string">&#x27;供热+加湿&#x27;</span>, <span class="string">&#x27;供热&#x27;</span>, <span class="string">&#x27;供热+除湿&#x27;</span>, <span class="string">&#x27;加湿&#x27;</span>, <span class="string">&#x27;通风&#x27;</span>, <span class="string">&#x27;除湿&#x27;</span>, <span class="string">&#x27;供冷+加湿&#x27;</span>, <span class="string">&#x27;供冷&#x27;</span>, <span class="string">&#x27;供冷+除湿&#x27;</span>]</span><br><span class="line">sizes = [time1, time2, time3, time4, time5, time6, time7, time8, time9]</span><br><span class="line">sizes2 = np.array(sizes)</span><br><span class="line">index = np.where(sizes2==0)[0]</span><br><span class="line">index = index.tolist()</span><br><span class="line">new_labels = [labels[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(0, len(labels), 1) <span class="keyword">if</span> i not <span class="keyword">in</span> index] <span class="comment"># 删除后的列表</span></span><br><span class="line">new_time = [sizes[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(0, len(sizes), 1) <span class="keyword">if</span> i not <span class="keyword">in</span> index] <span class="comment"># 删除后的列表</span></span><br><span class="line">colors = [<span class="string">&#x27;#751515&#x27;</span>, <span class="string">&#x27;#ff6d6d&#x27;</span>, <span class="string">&#x27;#e767ae&#x27;</span>, <span class="string">&#x27;#9c9c9c&#x27;</span>, <span class="string">&#x27;#ffc0cb&#x27;</span>, <span class="string">&#x27;#fffb99&#x27;</span>, <span class="string">&#x27;#5dc995&#x27;</span>, <span class="string">&#x27;#0821aa&#x27;</span>, <span class="string">&#x27;#3c7b24&#x27;</span>]</span><br><span class="line">new_colors = [colors[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(0, len(colors), 1) <span class="keyword">if</span> i not <span class="keyword">in</span> index]</span><br><span class="line">def func(pct, allvals):</span><br><span class="line">    absolute = int(pct/100.*np.sum(allvals))</span><br><span class="line">    <span class="built_in">return</span> <span class="string">&quot;&#123;:d&#125;&quot;</span>.format(absolute)</span><br><span class="line"></span><br><span class="line">wedges, texts, c = ax.pie(new_time, autopct=lambda pct: func(pct, new_time),colors=new_colors,radius=1.2,labels=new_labels)</span><br></pre></td></tr></table></figure><h4 id="关于雷达图的画法："><a href="#关于雷达图的画法：" class="headerlink" title="关于雷达图的画法："></a>关于雷达图的画法：</h4><p>写累了，直接上代码吧，哈哈哈哈，这里我做了个小处理是把数据放在了标签的下面：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">time = [time1,time2,time3,time4]</span><br><span class="line">name = [<span class="string">&#x27;供冷\n&#x27;</span>+str(time1), <span class="string">&#x27;供热\n&#x27;</span>+str(time2), <span class="string">&#x27;除湿\n&#x27;</span>+str(time3),<span class="string">&#x27;加湿\n&#x27;</span>+str(time4)] <span class="comment"># 标签</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(111, projection=<span class="string">&#x27;polar&#x27;</span>) <span class="comment">#创建极坐标的Axes对象</span></span><br><span class="line">max,min = max(time),min(time)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 提取数值信息和标签信息</span></span><br><span class="line">data=np.array(time)</span><br><span class="line">label=np.array(name)</span><br><span class="line">n = len(label)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(data)</span></span><br><span class="line">theta = np.linspace(0, 2*np.pi, len(data), endpoint=False) <span class="comment">#计算区间角度</span></span><br><span class="line">thetas = np.concatenate((theta, [theta[0]])) <span class="comment">#添加第一个数据，实现闭合</span></span><br><span class="line">data = np.concatenate((data, [data[0]])) <span class="comment">#添加第一个数据，实现闭合</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax.set_thetagrids(thetas*180/np.pi, label) <span class="comment">#设置网格标签，单位转化成度数</span></span><br><span class="line"></span><br><span class="line">ax.set_theta_zero_location(<span class="string">&#x27;N&#x27;</span>) <span class="comment">#设置极坐标0°位置</span></span><br><span class="line">ax.set_rlim(0, max) <span class="comment">#设置显示的极径范围</span></span><br><span class="line">ax.fill(thetas, data, facecolor=<span class="string">&#x27;b&#x27;</span>, alpha=0.15) <span class="comment">#填充颜色</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ax.tick_params(pad=12, grid_color=<span class="string">&#x27;k&#x27;</span>, grid_alpha=0.2, grid_linestyle=(0, (5, 5)))</span><br><span class="line"><span class="comment"># 取消标签显示</span></span><br><span class="line">ax.tick_params(<span class="string">&#x27;y&#x27;</span>, labelleft=False) <span class="comment"># 取消left即可（top，bottom，right）</span></span><br><span class="line"><span class="comment"># 获取输入文件中的城市名字</span></span><br><span class="line">a = filepath.split(<span class="string">&#x27;.&#x27;</span>)[0]</span><br><span class="line">str = a+<span class="string">&#x27;强度雷达图&#x27;</span></span><br><span class="line"></span><br><span class="line">fig.text(0.5, 0.965, str,horizontalalignment=<span class="string">&#x27;center&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>, weight=<span class="string">&#x27;bold&#x27;</span>,size=<span class="string">&#x27;large&#x27;</span>)</span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.savefig(a)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>效果图如下：</p><center><img src="/images/radar.png" width="300" height="300"></center></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a> <a href="/tags/matplotlib/" rel="tag"><i class="fa fa-tag"></i> matplotlib</a> <a href="/tags/numpy/" rel="tag"><i class="fa fa-tag"></i> numpy</a> <a href="/tags/excel/" rel="tag"><i class="fa fa-tag"></i> excel</a> <a href="/tags/pandas/" rel="tag"><i class="fa fa-tag"></i> pandas</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2021/03/31/%E4%BD%BF%E7%94%A8AWS-EC2%E5%BB%BA%E7%AB%8BVPN%E6%95%99%E7%A8%8B/" rel="prev" title="使用AWS EC2建立VPN教程"><i class="fa fa-chevron-left"></i> 使用AWS EC2建立VPN教程</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener("tabs:register",()=>{let{activeClass:e}=CONFIG.comments;if(CONFIG.comments.storage&&(e=localStorage.getItem("comments_active")||e),e){let t=document.querySelector(`a[href="#comment-${e}"]`);t&&t.click()}}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Pandas%E4%BB%8Eexcel%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E3%80%81%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE"><span class="nav-number">1.</span> <span class="nav-text">使用Pandas从excel导入导出、处理数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E5%99%A8%E4%B9%8B%E4%B8%80%EF%BC%9ADataFrame"><span class="nav-number">1.1.</span> <span class="nav-text">利器之一：DataFrame</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%8Eexcel%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.1.</span> <span class="nav-text">从excel导入数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84dataframe"><span class="nav-number">1.1.2.</span> <span class="nav-text">创建新的dataframe</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E5%99%A8%E4%B9%8B%E4%BA%8C%EF%BC%9ASeries"><span class="nav-number">1.2.</span> <span class="nav-text">利器之二：Series</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E5%9B%BE%E8%A1%A8%E4%B8%8A%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E4%B8%AD%E6%96%87%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">2.</span> <span class="nav-text">关于图表上显示不出中文的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%98%E5%88%B6%E9%A2%9C%E8%89%B2%E5%9D%97%E9%98%B5%E5%9B%BE"><span class="nav-number">3.</span> <span class="nav-text">绘制颜色块阵图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%951%EF%BC%9A%E4%BD%BF%E7%94%A8Image%E7%9B%B4%E6%8E%A5%E7%94%9F%E6%88%90"><span class="nav-number">3.1.</span> <span class="nav-text">方法1：使用Image直接生成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%B9%E6%B3%952%EF%BC%9A%E4%BD%BF%E7%94%A8matplotlib%E6%9D%A5%E5%AE%8C%E6%88%90"><span class="nav-number">3.2.</span> <span class="nav-text">方法2：使用matplotlib来完成</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BA%B5%E5%90%91%E6%8B%89%E4%BC%B8%EF%BC%9A"><span class="nav-number">3.2.1.</span> <span class="nav-text">纵向拉伸：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%86365%E5%A4%A9%E7%9A%84%E6%A8%AA%E5%9D%90%E6%A0%87%E6%94%B9%E6%88%901-12%E6%9C%88"><span class="nav-number">3.2.2.</span> <span class="nav-text">将365天的横坐标改成1-12月</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8A%A0%E4%B8%8A%E5%9E%82%E7%9B%B4%E4%BA%8E%E6%A8%AA%E5%9D%90%E6%A0%87%E7%9A%84%E5%8F%82%E8%80%83%E7%BA%BF"><span class="nav-number">3.2.3.</span> <span class="nav-text">加上垂直于横坐标的参考线</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="nav-number">4.</span> <span class="nav-text">一些其他小技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A5%BC%E7%8A%B6%E5%9B%BE%E5%8A%A0%E4%B8%8A%E5%9B%BE%E4%BE%8B%E4%BB%A5%E5%8F%8A%E6%8E%A7%E5%88%B6%E5%9B%BE%E4%BE%8B%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-number">4.1.</span> <span class="nav-text">饼状图加上图例以及控制图例的位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A5%BC%E7%8A%B6%E5%9B%BE%E9%BB%98%E8%AE%A4%E6%98%BE%E7%A4%BA%E7%9A%84%E6%98%AF%E6%AF%94%E4%BE%8B%EF%BC%8C%E5%A6%82%E4%BD%95%E6%98%BE%E7%A4%BA%E6%95%B0%E5%80%BC%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E4%B8%8D%E6%98%BE%E7%A4%BA%E6%95%B0%E5%80%BC%E4%B8%BA0%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%9F"><span class="nav-number">4.2.</span> <span class="nav-text">饼状图默认显示的是比例，如何显示数值，以及如何不显示数值为0的数据？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E9%9B%B7%E8%BE%BE%E5%9B%BE%E7%9A%84%E7%94%BB%E6%B3%95%EF%BC%9A"><span class="nav-number">4.3.</span> <span class="nav-text">关于雷达图的画法：</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Haoqiang Lyu" src="/uploads/avatar.jpg"><p class="site-author-name" itemprop="name">Haoqiang Lyu</p><div class="site-description" itemprop="description">For you, a thousand times over.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">9</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">14</span> <span class="site-state-item-name">tags</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/haoqianglyu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;haoqianglyu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:15951656032@163.com" title="E-Mail → mailto:15951656032@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a> </span><span class="links-of-author-item"><a href="https://instagram.com/haoqianglyu" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;haoqianglyu" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a> </span><span class="links-of-author-item"><a href="https://www.linkedin.com/in/haoqiang-lyu-603b2b173" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;haoqiang-lyu-603b2b173" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>Linkedin</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Friends Link</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://shuaiyuan.me/" title="https:&#x2F;&#x2F;shuaiyuan.me" rel="noopener" target="_blank">ShuaiYuan's Blog</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="user"></i> </span><span class="author" itemprop="copyrightHolder">Haoqiang Lyu</span></div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("06/21/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="Run for "+dnum+" Days ",document.getElementById("times").innerHTML=hnum+" Hours "+mnum+" m "+snum+" s"}setInterval("createtime()",250)</script></div></footer></div><script>$(".highlight").not(".gist .highlight").each(function(e,t){var n=$("<div>").addClass("highlight-wrap");$(t).after(n),n.append($("<button>").addClass("copy-btn").append("Copy").on("click",function(e){var t=$(this).parent().find(".code").find(".line").map(function(e,t){return $(t).text()}).toArray().join("\n"),n=document.createElement("textarea"),o=window.pageYOffset||document.documentElement.scrollTop;n.style.top=o+"px",n.style.position="absolute",n.style.opacity="0",n.readOnly=!0,n.value=t,document.body.appendChild(n);const a=document.getSelection();o=0<a.rangeCount&&a.getRangeAt(0);n.select(),n.setSelectionRange(0,t.length),n.readOnly=!1,document.execCommand("copy")?$(this).text("Copied"):$(this).text("Copy failed"),n.blur(),$(this).blur(),o&&(a.removeAllRanges(),a.addRange(o))})).on("mouseleave",function(e){var t=$(this).find(".copy-btn");setTimeout(function(){t.text("Copy")},300)}).append(t)})</script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var e,t,o,n,r=document.getElementsByTagName("link");if(0<r.length)for(i=0;i<r.length;i++)"canonical"==r[i].rel.toLowerCase()&&r[i].href&&(e=r[i].href);t=(e||window.location.protocol).split(":")[0],e=e||window.location.href,window,o=e,n=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(o)||(t="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",n?(t+="?r="+encodeURIComponent(document.referrer),o&&(t+="&l="+o)):o&&(t+="?l="+o),(new Image).src=t)}()</script><script src="/js/local-search.js"></script><script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script><script>window.addEventListener("load",()=>{quicklink({timeout:3e3,priority:!0,ignores:[E=>E.includes("#"),E=>"https://haoqianglyu.github.io/2021/05/10/%E5%85%B3%E4%BA%8Epython%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BD%BF%E7%94%A8matplotlib%E7%94%BB%E5%9B%BE%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/"===E]})})</script><script>NexT.utils.loadComments(document.querySelector("#valine-comments"),()=>{NexT.utils.getScript("//cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js",()=>{var a=["nick","mail","link"];"nick,mail".split(",").filter(e=>a.includes(e));new Valine({el:"#valine-comments",verify:!1,notify:"true",appId:"qpLO4IIFvprwomcELU5SdxLB-MdYXbMMI",appKey:"WLf8TEMlWXnrBRXeQyUK918B",placeholder:"Just go go",avatar:"monsterid",master:"9110c22171fbad7714d3e1c2807baef5",friends:["bd204fecd418a13e87f34cac4f38fc8e","f662cacafc9618a7963d4b1111f37f1f"],tagMeta:["博主","小伙伴","访客"],metaPlaceholder:{nick:"昵称/QQ号",mail:"邮箱（必填/完全保密）"},pageSize:"10",visitor:!1,lang:"en",path:location.pathname,recordIP:!1,serverURLs:""})},window.Valine)})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:120,height:240},mobile:{show:!1},react:{opacityDefault:1,opacityOnHover:1},log:!1,tagMode:!1})</script></body></html>